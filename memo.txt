# Remove-BOM.ps1

# Java 파일에서 BOM 제거
$files = Get-ChildItem -Path . -Filter "*.java" -Recurse

$count = 0
$Utf8NoBomEncoding = New-Object System.Text.UTF8Encoding $False

foreach ($file in $files) {
    $content = Get-Content -Path $file.FullName -Raw -Encoding UTF8
    
    # BOM이 있는지 확인 (첫 문자가 \ufeff인지)
    if ($content.Length -gt 0 -and $content[0] -eq [char]0xFEFF) {
        Write-Host "BOM 제거 중: $($file.FullName)" -ForegroundColor Yellow
        
        # BOM 제거
        $content = $content.Substring(1)
        
        # UTF-8 without BOM으로 저장
        [System.IO.File]::WriteAllText($file.FullName, $content, $Utf8NoBomEncoding)
        $count++
    }
}

Write-Host "`n총 $count 개 파일에서 BOM 제거 완료!" -ForegroundColor Green
